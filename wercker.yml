# our build should run within a Ruby box
box: wercker/ruby
build:
  steps:
    # Run a smart version of bundle install
    # which improves build execution time of
    # future builds
    - bundle-install

    - npm-install

    # Execute jeykyll doctor command to validate the
    # site against a list of known issues.
    - script:
        name: jekyll doctor
        code: bundle exec jekyll doctor

    - grunt
deploy:
    - rsync-deploy:
        host: $HOST
        user: $USER
        source: $SOURCE
        directory: $DIRECTORY
        sshkey: $DEPLOYKEY_PRIVATE
